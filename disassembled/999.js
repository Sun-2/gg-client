E.ca.di = {
  spa: 453,
  rka: {
    "&lt;jestem_z_g\u0142upkiem&gt;": "jestem_z_glupkiem",
    "&lt;buja_w_ob\u0142okach&gt;": "buja_w_oblokach",
    "&lt;u_mnie_dziala&gt;": "dziala",
    "&lt;urwanie g\u0142owy&gt;": "krecka_dostal",
    "&lt;pokaza\u0142_j\u0119zyk&gt;": "8p",
    "&lt;czyta_gazet\u0119&gt;": "gazeta",
    "&lt;zdenerwowany&gt;": "zdenerwowany",
    "&lt;zniesmaczony&gt;": "zniesmaczony",
    "&lt;zawstydzony&gt;": "wstydnis",
    "&lt;umniedziala&gt;": "dziala",
    "&lt;niedowiarek&gt;": "puknijsie",
    "&lt;czarodziej&gt;": "czarodziej",
    "&lt;pocieszacz&gt;": "pocieszacz",
    "&lt;serduszka2&gt;": "serduszka2",
    "&lt;nie_powiem&gt;": "nie_powiem",
    "&lt;wy\u015bmiewacz&gt;": "wysmiewacz",
    "&lt;kwiatuszek&gt;": "kwiatuszek",
    "&lt;marzyciel&gt;": "oczy",
    "&lt;z_j\u0119zorem&gt;": "z_jezorem",
    "&lt;zakochany&gt;": "zakochany",
    "&lt;zdziwiony&gt;": "zdziwko",
    "&lt;okularnik&gt;": "okularnik",
    "&lt;dokuczacz&gt;": "dokuczacz",
    "&lt;chatownik&gt;": "chatownik",
    "&lt;serduszka&gt;": "serduszka",
    "&lt;boj\u0119_si\u0119&gt;": "boje_sie",
    "&lt;drinkuje&gt;": "drink",
    "&lt;je_pizz\u0119&gt;": "je_pizze",
    "&lt;g\u0142aszcze&gt;": "glaszcze",
    "&lt;serducho&gt;": "serducho",
    "&lt;figielek&gt;": "figielek",
    "&lt;co_jest?&gt;": "co_jest",
    "&lt;wstydni\u015b&gt;": "zawstydzony",
    "&lt;w\u015bciek\u0142y&gt;": "wsciekly",
    "&lt;bezradny&gt;": "bezradny",
    "&lt;zm\u0119czony&gt;": "zmeczony",
    "&lt;prysznic&gt;": "prysznic",
    "&lt;cwaniak2&gt;": "cfaniak",
    "&lt;telefon2&gt;": "telefon2",
    "&lt;urodziny&gt;": "tort",
    "&lt;do_bani&gt;": "dobani2",
    "&lt;olaboga&gt;": "olaboga",
    "&lt;milczek&gt;": "milczek",
    "&lt;onajego&gt;": "onajego",
    "&lt;anio\u0142ek&gt;": "aniolek",
    "&lt;co_jest&gt;": "co_jest",
    "&lt;skromny&gt;": "zawstydzony",
    "&lt;kwiatek&gt;": "kwiatek",
    "&lt;prezent&gt;": "prezent",
    "&lt;telefon&gt;": "telefon",
    "&lt;k\u0142\u00f3tnia&gt;": "klotnia",
    "&lt;spad\u00f3wa&gt;": "fuck",
    "&lt;cwaniak&gt;": "cwaniak",
    "&lt;przytul&gt;": "przytul",
    "&lt;za\u0142amka&gt;": "zalamka",
    "&lt;oklaski&gt;": "brawa",
    "&lt;radocha&gt;": "zacieszacz",
    "&lt;rotfl3&gt;": "rotfl3",
    "&lt;g\u0142upek&gt;": "glupek",
    "&lt;papapa&gt;": "papapa",
    "&lt;buziak&gt;": "buziak",
    "&lt;smutny&gt;": "smutny",
    "&lt;ziewa2&gt;": "ziew",
    "&lt;rotfl2&gt;": "rotfl2",
    "&lt;weso\u0142y&gt;": "usmiech",
    "&lt;mi\u0142o\u015b\u0107&gt;": "milosc",
    "&lt;u\u015bcisk&gt;": "uscisk",
    "&lt;my\u015bli2&gt;": "hmmm",
    "&lt;boisi\u0119&gt;": "boisie",
    "&lt;z\u0142ezk\u0105&gt;": "zlezkawoku",
    "&lt;czytaj&gt;": "czytaj",
    "&lt;bukiet&gt;": "bukiet",
    "&lt;p\u0142acze&gt;": "placze",
    "&lt;idiota&gt;": "glupek2",
    "&lt;jab\u0142ko&gt;": "jablko",
    "&lt;plotki&gt;": "plotki",
    "&lt;kwa\u015bny&gt;": "kwasny",
    "&lt;3m_si\u0119&gt;": "3m_sie",
    "&lt;pomocy&gt;": "pomocy",
    "&lt;zakupy&gt;": "zakupy",
    "&lt;nerwus&gt;": "nerwus",
    "&lt;\u015bpioch&gt;": "spioch",
    "&lt;soczek&gt;": "soczek",
    "&lt;piwosz&gt;": "piwko2",
    "&lt;s\u0142onko&gt;": "slonko",
    "&lt;ta\u0144cz\u0119&gt;": "tancze",
    "&lt;\u015bciana&gt;": "sciana",
    "&lt;spadaj&gt;": "spadaj",
    "&lt;hahaha&gt;": "hahaha",
    "&lt;tuptup&gt;": "tuptup",
    "&lt;nonono&gt;": "nonono",
    "&lt;dresik&gt;": "dresiarz",
    "&lt;killer&gt;": "killer",
    "&lt;palacz&gt;": "palacz",
    "&lt;rotfl&gt;": "rotfl",
    "&lt;beczy&gt;": "beczy",
    "&lt;\u015bnieg&gt;": "snieg",
    "&lt;stres&gt;": "stres",
    "&lt;\u0142apka&gt;": "lapka",
    "&lt;zegar&gt;": "zegar",
    "&lt;cmok2&gt;": "cmok2",
    "&lt;winko&gt;": "szampan",
    "&lt;serce&gt;": "serce",
    "&lt;ca\u0142us&gt;": "calus",
    "&lt;wanna&gt;": "wanna",
    "&lt;mruga&gt;": "oczko",
    "&lt;ganja&gt;": "ganja",
    "&lt;rzygi&gt;": "rzygi",
    "&lt;luzik&gt;": "luzik",
    "&lt;ucze\u0144&gt;": "uczen",
    "&lt;beksa&gt;": "beksa",
    "&lt;wnerw&gt;": "wnerw",
    "&lt;my\u015bli&gt;": "mysli",
    "&lt;obiad&gt;": "obiad",
    "&lt;spoko&gt;": "spoko",
    "&lt;fotka&gt;": "aparat",
    "&lt;brawo&gt;": "oklasky",
    "&lt;peace&gt;": "peace",
    "&lt;paker&gt;": "paker",
    "&lt;nauka&gt;": "nauka",
    "&lt;krzyk&gt;": "krzyk",
    "&lt;papa2&gt;": "papa2",
    "&lt;plask&gt;": "plask",
    "&lt;bu\u017aki&gt;": "buzki",
    "&lt;cisza&gt;": "cisza",
    "&lt;ha\u0142as&gt;": "halas",
    "&lt;pisze&gt;": "pisze",
    "&lt;prosi&gt;": "prosi",
    "&lt;hejka&gt;": "hejka",
    "&lt;ziewa&gt;": "spie",
    "&lt;mniam&gt;": "mniam",
    "&lt;jupi&gt;": "jupi",
    "&lt;pies&gt;": "pies",
    "&lt;piwo&gt;": "piwo",
    "&lt;r\u00f3\u017ca&gt;": "roza",
    "&lt;spox&gt;": "spox",
    "&lt;heej&gt;": "heej",
    "&lt;usta&gt;": "usta",
    "&lt;list&gt;": "list",
    "&lt;hura&gt;": "hura",
    "&lt;muza&gt;": "muza",
    "&lt;kawa&gt;": "kawa",
    "&lt;cmok&gt;": "cmok",
    "&lt;lol2&gt;": "lol2",
    "&lt;papa&gt;": "papa",
    "&lt;uoee&gt;": "uoeee",
    "&lt;foch&gt;": "foch",
    "&lt;gool&gt;": "gool",
    "&lt;blee&gt;": "dobani",
    "&lt;nono&gt;": "paluszkiem",
    "&lt;gafa&gt;": "gafa",
    "&lt;czas&gt;": "czas",
    "&lt;stop&gt;": "stop",
    "&lt;haha&gt;": "haha",
    "&lt;okok&gt;": "okok",
    "&lt;szok&gt;": "szok",
    "&lt;boks&gt;": "boks",
    "&lt;hmmm&gt;": "ysz",
    "&lt;faja&gt;": "faja",
    "&lt;\u015bpi\u0119&gt;": "spie",
    "&lt;leje&gt;": "pada",
    "&lt;dupa&gt;": "dupa",
    "&lt;bije&gt;": "bije",
    "&lt;bij\u0105&gt;": "dostal",
    "&lt;sex&gt;": "sex",
    "&lt;nie&gt;": "nie",
    "&lt;co?&gt;": "co",
    "&lt;wow&gt;": "wow",
    "&lt;jem&gt;": "jem",
    "&lt;tak&gt;": "tak",
    "&lt;yes&gt;": "yes",
    "&lt;kot&gt;": "kotek",
    "&lt;z\u0142y&gt;": "zly2",
    "&lt;lol&gt;": "lol",
    "&lt;z\u0105b&gt;": "zab",
    "&lt;gra&gt;": "gra",
    "&lt;w8&gt;": "w8",
    "&lt;ok&gt;": "ok",
    "&lt;no&gt;": "no",
    "&lt;wc&gt;": "wc",
    "&lt;co&gt;": "co",
    "]:-&gt;": "diabelek",
    "wrrrr!": "zly2",
    ":-&gt;": "chytry",
    ";-&gt;": "chytry",
    "soa#1": "dziala",
    ";&gt;": "chytry",
    nieee: "niee",
    ":&gt;": "ostr",
    tiaaa: "tiaaa",
    ";-))": "oczko2",
    ";-((": "placze",
    ":-))": "usmiech2",
    ":-pp": "jezyk1",
    ";-pp": "jezyk2",
    ";-p": "jezyk2",
    ":))": "wesoly",
    ":((": "smutny3",
    ";-]": "krzywy",
    ":-]": "krzywy",
    ":-(": "smutny3",
    ";-|": "ysz",
    ":-|": "ysz",
    ";))": "mruga",
    ";-o": "wow",
    ":-o": "wow",
    ";-)": "oczko2",
    ";-d": "zeby",
    ":-d": "zeby",
    ";-*": "cmok",
    ";-(": "placze",
    ":-*": "cmok",
    ":-)": "usmiech2",
    ";((": "placze",
    "^_^": "manga_usmiech",
    ":pp": "jezyk1",
    ";-/": "kwasny",
    ":-/": "kwasny",
    ";pp": "jezyk2",
    ":-p": "jezyk1",
    ";|": "ysz",
    ";*": "cmok",
    ":p": "jezyk",
    ";)": "oczko",
    ":|": "yyyy",
    ":(": "smutny2",
    ":]": "kwadr",
    "??": "pytajnik",
    ";(": "placze",
    ":d": "zeby",
    ":o": "wow",
    "!!": "wykrzyknik",
    ";]": "krzywy",
    ":/": "kwasny",
    ";/": "kwasny",
    ":*": "cmok",
    "^^": "manga_usmiech",
    ":[": "zly",
    ";o": "wow",
    ";d": "zeby",
    ";p": "jezyk_oko",
    ":)": "usmiech"
  },
  jya: ["span", "b", "i", "u", "p", "div", "font"],
  uja: function (c) {
    var w = c.Ipa,
        q = c.sender,
        o = c.time,
        f = c.Wea,
        y = c.user,
        u = c.images,
        c = C.k().ia.ob("chat");
    c.showEmots == !0 && (w = this.Dra(w));
    w = this.Oqa(w, u);
    u = [];
    f && f.length && c.resolveLinks == !0 ? (w = C.ca.xa.Et(w), u = this.Mqa(w, f, q, o, y)) : u.push({
      text: w
    });
    return u;
  },
  Oqa: function (c, f) {
    Ext.each(f, function (g) {
      var b = '<img style="max-width:350px;" src="data:image/png;base64,' + new gg.aa.hj().encode(g.contents) + '" alt="obrazek"/>',
          g = Ext.String.format("/image:{0}/", g.Af);
      c = c.replace(g, b);
    });
    return c;
  },
  uca: function (c) {
    return c.replace(/[-[\]{}()*+?.,\\^$|#\s\/]/g, "\\$&");
  },
  Mqa: function (G, D, B, z, y) {
    var o = [],
        f = {};
    D && D.length && D[0].content ? Ext.Array.each(D, function (e) {
      if (o.indexOf(e.content) === -1) {
        o.push(e.content), e.peeksed = !0, f[C.ca.xa.Et(e.content)] = e, this.qZ(e.title, e.Zza, e.content, C.ca.xa.Xe(e.content), e.aj, B, z, y, e.Uya);
      }
    }, this) : Ext.Array.each(D, function (e) {
      o.indexOf(e) === -1 && (o.push(e), f[C.ca.xa.Et(e)] = {
        content: e,
        peeksed: !1
      });
    }, this);

    for (var D = o.length, c = "", L = 0, c = 0; c < D; c += 1) {
      o[c] = this.uca(C.ca.xa.Et(o[c]));
    }

    var c = '((?:<a href="[^"]+">)?(?:(?:' + o.join(")|(?:") + "))(?:</a>)?)",
        I = [];
    G.replace(RegExp(c, "ig"), function (n, l, b) {
      L == 0 && b > 0 ? this.Pw(I, [G.substr(L, b), this.mx(G.substr(b, G.length))]) : this.Pw(I, [this.mx(G.substr(0, L)), G.substr(L, b - L), this.mx(G.substr(b - L, G.length))]);
      this.Pw(I, [G.substr(b, l.length)], f[G.substr(b, l.length)]);
      L = b + l.length;
    }.bind(this));
    L < G.length && this.Pw(I, [this.mx(G.substr(0, L)), G.substr(L, G.length - L)]);
    return I;
  },
  mx: function (c) {
    return c.replace(/(<(br|img|(?:\/?a))[^>]*>)/gi, "").replace(/(?:^[^<]+)|(?:(>)[^<]+(<))|(?:[^><]+$)/g, function (e, l, f) {
      return (l || "") + (f || "");
    });
  },
  qga: function (c) {
    return /^([^<]+)|(>[^<]+)|(<img[^>]+>)/ig.test(c);
  },
  Pw: function (c, h, f) {
    h = h || [];
    f = f || m;
    h = h.join("");
    this.qga(h) && c.push({
      text: h,
      attachment: f
    });
  },
  qZ: function (D, B, z, y, w, o, f, c, G) {
    if (typeof o === "object") {
      o = o.data.uin;
    }

    C.k().fireEvent("peeksinserted", {
      record: {
        title: D || m,
        description: B || m,
        content: z || m,
        $qa: y || m,
        senderID: o || m,
        thumbnail: w || m,
        sendTime: f + "000" || m,
        gCa: c || m,
        type: G
      }
    });
  },
  zqa: function (c, n, l) {
    var f = function (D) {
      var o = m;

      try {
        o = Ext.JSON.decode(D.responseText);
      } catch (B) {
        o = m;
      }

      if (o) {
        try {
          o = o.result.objects[0], o.link = o.link;
        } catch (y) {
          o = {};
        }

        if (o) {
          var D = Ext.get(c),
              g = D.prev(),
              b = "";

          if (D) {
            if (o.fromGifApi === !0) {
              g.remove(), D.dom.innerHTML = C.k().da.Wa("chat-sentences-attachment-giphy-mp4", {
                attachment: o,
                id: c
              }), this.Eqa(c), b = "ml__item-part--giphy-image";
            } else {
              switch (o.type) {
                case "file":
                  g && g.remove();
                  "image" in o && "ggdriveBinaryImage" in o && o.ggdriveBinaryImage ? (D.dom.innerHTML = C.k().da.Wa("chat-sentences-attachment-publink-image", {
                    image: o.image,
                    attachment: o,
                    id: c
                  }), b = "ml__item-part--publink-image") : (D.dom.innerHTML = C.k().da.Wa("chat-sentences-attachment-publink", {
                    attachment: o,
                    id: c
                  }), b = "ml__item-part--publink-file");
                  D.removeCls("d-none");
                  break;

                case "image":
                  g.select(".sr-anchor").remove();
                  (b = g.select(".ml__item-part-content")) && b.first().dom.childNodes.length === 0 && g.remove();
                  D.dom.innerHTML = C.k().da.Wa("chat-sentences-attachment-image", {
                    attachment: o,
                    id: c
                  });
                  D.removeCls("d-none");
                  b = "ml__item-part--image";
                  break;

                case "link":
                case "video":
                  D.dom.innerHTML = C.k().da.Wa("chat-sentences-attachment-link", {
                    attachment: o,
                    id: c
                  });
                  b = "ml__item-part--link";
                  D.removeCls("d-none");
                  break;

                default:
                  D.dom.innerHTML = C.k().da.Wa("chat-sentences-attachment-unknown", {
                    attachment: o,
                    id: c
                  }), D.removeCls("d-none"), b = "ml__item-part--unknown";
              }
            }

            D.addCls(b);
          }

          var G = this;
          setTimeout(function () {
            G.qZ(o.title, o.description, o.link, C.ca.xa.Xe(o.link), o.thumbnail, l.sender, l.time, l.user, o.type);
          }, 1500);
          D.removeCls("d-none");
        }
      }
    }.bind(this);

    this.X3(n, f, function () {
      Ext.get(c).removeCls("d-none");
    });
  },
  X3: function (c, h, f) {
    Ext.Ajax.request({
      url: "/api/peeks/peeks?url=" + encodeURIComponent(c),
      disableCaching: !1,
      method: "GET",
      success: h,
      failure: f,
      scope: this
    });
  },
  Dra: function (c) {
    var f = this.rka;
    return c.replace(RegExp("(<[^>]*>)|(?:(?:(?:(?:ftp|https?:\\/\\/)|(?:www\\.))|(?:(?:[\\w-]+)(?::[\\w-]+)?(?:@)))((?:[\\w-]+\\.)+(?:[a-z]{2,})){1}(?::\\d+)?(?:\\/(?:[^<>\"\\s'\\)\\(]*)*)?)|(wrrrr!)|(soa#1)|(nieee)|(tiaaa)|(\\!\\!)|(\\?\\?)|(\\^\\^)|(\\^_\\^)|(]:-&gt;)|(:-&gt;)|(;-&gt;)|(;&gt;)|(:&gt;)|(\\&lt;[^\\&:;\\]]+\\&gt;)|(\\&[a-z0-9]{2,8}\\;)|([\\;\\:])(\\-)?(([\\|\\*p\\)\\(\\]do\\/\\*\\[]){1,2})?", "gi"), function (e) {
      var g = f[e.toLowerCase()];
      return g ? '<img alt="' + e.toLowerCase() + '" src="' + C.ca.Da.yh("/images/emoticons/" + g + ".gif") + '" />' : e;
    });
  },
  lq: "400x400",
  Dca: "100x100",
  lk: "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
  Q3: function (c, p, o, n) {
    n = n || !1;
    o = !1;

    if (Ext.getBody().select(".chat-accordion-item.expanded ul.item-conversation").first()) {
      var f = parseInt(Math.ceil(this.spa * 7 / 10)) - 20;
      p > f ? (o = !0, c = c.replace(this.lq, f + "x" + f)) : c = n ? c.replace(this.lq, p + "x" + p) : c.replace(this.lq, this.Dca);
    }

    return {
      url: c,
      Vo: this.Sla(o)
    };
  },
  Sla: function (c) {
    return c ? " ml__extended-link-image--big" : " ml__extended-link-image--small";
  },
  v5: function (c, n, l, f) {
    Ext.defer(function () {
      var b = Ext.get(l);

      if (b !== m) {
        var h = b.select(".ml__extended-link-image").first(),
            g = this,
            e = new Image();

        e.onload = function () {
          var o = g.Q3(c, this.width, this.height);
          h.addCls(o.Vo);
          h.setStyle("background-image", "url(" + o.url + ")");
          b.removeCls("loading");
        };

        e.onerror = function () {
          f > 0 ? (h.dom.src = n, b.addCls("loading"), c += "&_t=" + new Date().getTime(), Ext.defer(function () {
            g.v5(c, n, l, 0);
          }, 10000)) : (b.removeCls("loading"), h.dom.src = g.lk, h.dom.width = 60);
        };

        e.src = c;
      }
    }, f > 0 ? 500 : 0, this);
  },
  bma: function (c, f) {
    this.v5(C.k().Vl + "/image/converted?src_path=" + encodeURIComponent(c) + "&dim=" + this.lq + "&format=png&rotate=auto", C.ca.Da.Pj() + "/images/loader_30_2.gif", f, 1);
    return C.ca.Da.lk;
  },
  t5: function (c, n, l, f) {
    Ext.defer(function () {
      var b = Ext.get(l);

      if (b !== m) {
        var h = b.select(".ml__extended-image img").first(),
            g = this,
            e = new Image();

        e.onload = function () {
          var o = g.Q3(c, this.width, this.height, !0);
          h.set({
            src: o.url
          });
          b.removeCls("loading");
        };

        e.onerror = function () {
          f > 0 ? (h.dom.src = n, b.addCls("loading"), c += "&_t=" + new Date().getTime(), Ext.defer(function () {
            g.t5(c, n, l, 0);
          }, 10000)) : (b.removeCls("loading"), h.dom.src = g.lk, h.dom.width = 60);
        };

        e.src = c;
      }
    }, f > 0 ? 500 : 0, this);
  },
  P3: function (c, f) {
    this.t5(C.k().Vl + "/image/converted?src_path=" + encodeURIComponent(c) + "&dim=" + this.lq + "&format=png&rotate=auto", C.ca.Da.Pj() + "/images/loader_30_2.gif", f, 1);
    return C.ca.Da.lk;
  },
  Pfa: function (c) {
    var f = document.createRange();
    f.selectNodeContents(c);
    c = f.getClientRects();
    return Array.prototype.slice.call(c).reduce(function (g, h) {
      return Math.max(g, h.width);
    }, 0);
  },
  $ta: function (c) {
    var h = c.querySelector(".ml__item-part--text .ml__item-part-content");

    if (h) {
      var f = Array.prototype.slice.call(h.childNodes);
      f.filter(function (e) {
        return e.nodeType !== Node.TEXT_NODE;
      }).length === 0 && window.IntersectionObserver && new IntersectionObserver(function (e) {
        e[0].intersectionRatio && Ext.Function.defer(function () {
          h.style.width = this.Pfa(f[0]) + 21 + "px";
        }, 10, this);
      }.bind(this), {
        root: document.body
      }).observe(h);
    }
  },
  Eqa: function (c) {
    var f = Ext.get(c).dom.querySelector("video");
    setTimeout(function () {
      f.play();
    });
  }
};